"use client";

import { useToggle } from "hooks/useToggle";
import React from "react";
import SizeChartBottomSheet from "./SizeChartBottomSheet";
import SizeChartDialog from "./SizeChartDialog";

type SizeGuideButtonProps = {
  productSize: string;
  sizeChartId: string;
};

const SizeGuideButton: React.FC<SizeGuideButtonProps> = (props) => {
  const { sizeChartId, productSize } = props;

  const { close, isOpen, open } = useToggle();
  const {
    close: closeBottomSheet,
    isOpen: isBottomSheetOpen,
    open: openBottomSheet,
  } = useToggle();

  return (
    <span className="inline-block cursor-pointer text-right text-nowrap text-neutral-400">
      <button
        onClick={open}
        className="hidden text-xs md:flex md:items-center md:gap-x-1"
      >
        Size guide <SizeMeasureIcon />
      </button>
      <button
        onClick={openBottomSheet}
        className="flex items-center gap-2 text-xs md:hidden"
      >
        Size guide
        <SizeMeasureIcon />
      </button>
      <div className="block md:hidden">
        <SizeChartBottomSheet
          sizeChartId={sizeChartId}
          isOpen={isBottomSheetOpen}
          close={closeBottomSheet}
          productSize={productSize}
        />
      </div>
      <div className="hidden cursor-auto md:block">
        <SizeChartDialog
          isOpen={isOpen}
          close={close}
          sizeChartId={sizeChartId}
          productSize={productSize}
        />
      </div>
    </span>
  );
};

const SizeMeasureIcon = () => (
  <span className="fall size-8 min-w-8 rounded-full bg-blue-light p-1">
    <svg
      width="18"
      height="8"
      viewBox="0 0 18 8"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M1.82827 1.30968C1.70942 1.3097 1.59544 1.35693 1.5114 1.44097C1.42736 1.52501 1.38013 1.63899 1.38011 1.75784L1.38005 6.24057C1.38007 6.35942 1.42729 6.4734 1.51133 6.55743C1.59537 6.64147 1.70934 6.68869 1.82819 6.68871L16.1714 6.68851C16.2903 6.68849 16.4042 6.64127 16.4883 6.55723C16.5723 6.47318 16.6195 6.35921 16.6196 6.24036L16.619 1.75826C16.619 1.63941 16.5718 1.52543 16.4877 1.44139C16.4037 1.35735 16.2897 1.31013 16.1709 1.31012L14.8271 1.31014L14.8264 3.47734C14.8273 3.53685 14.8164 3.59595 14.7943 3.65119C14.7721 3.70643 14.7392 3.75671 14.6974 3.7991C14.6557 3.84149 14.6059 3.87513 14.551 3.89807C14.496 3.921 14.4371 3.93277 14.3776 3.93269C14.3181 3.93261 14.2592 3.92067 14.2043 3.89758C14.1495 3.87449 14.0998 3.84071 14.0581 3.79821C14.0165 3.7557 13.9837 3.70533 13.9617 3.65002C13.9397 3.59472 13.929 3.53559 13.9301 3.47608L13.9308 1.31015L12.1369 1.31017L12.1369 2.43086C12.1348 2.54836 12.0867 2.66037 12.0029 2.74275C11.9191 2.82513 11.8063 2.87129 11.6887 2.87129C11.5712 2.87129 11.4584 2.82513 11.3746 2.74276C11.2907 2.66038 11.2426 2.54838 11.2406 2.43087L11.2406 1.31019L9.44803 1.31021L9.44799 3.47678C9.44903 3.53629 9.4382 3.59541 9.41614 3.65068C9.39408 3.70596 9.36124 3.75629 9.31952 3.79874C9.2778 3.84119 9.22805 3.87491 9.17316 3.89792C9.11828 3.92094 9.05936 3.93279 8.99984 3.93279C8.94033 3.93279 8.88141 3.92094 8.82652 3.89793C8.77164 3.87491 8.72188 3.8412 8.68017 3.79875C8.63845 3.7563 8.60561 3.70597 8.58355 3.65069C8.56149 3.59542 8.55067 3.5363 8.5517 3.47679L8.55173 1.31022L6.75915 1.31025L6.75913 2.43093C6.76016 2.49044 6.74934 2.54956 6.72728 2.60483C6.70522 2.66011 6.67238 2.71044 6.63066 2.75289C6.58894 2.79534 6.53919 2.82906 6.4843 2.85207C6.42941 2.87509 6.37049 2.88694 6.31098 2.88694C6.25146 2.88694 6.19254 2.87509 6.13766 2.85208C6.08277 2.82906 6.03302 2.79535 5.9913 2.7529C5.94959 2.71045 5.91674 2.66012 5.89469 2.60485C5.87263 2.54957 5.8618 2.49045 5.86284 2.43095L5.86285 1.31026L4.069 1.31029L4.0696 3.47749C4.06956 3.53638 4.05792 3.59469 4.03534 3.64909C4.01277 3.70348 3.9797 3.7529 3.93802 3.79451C3.89635 3.83613 3.84689 3.86912 3.79246 3.89162C3.73803 3.91412 3.67971 3.92568 3.62082 3.92564C3.56193 3.9256 3.50362 3.91396 3.44922 3.89139C3.39483 3.86881 3.34541 3.83574 3.3038 3.79407C3.26219 3.7524 3.22919 3.70294 3.20669 3.64851C3.18419 3.59409 3.17264 3.53576 3.17268 3.47687L3.17334 1.30966L1.82827 1.30968ZM0.483822 1.75912C0.483768 1.58246 0.518524 1.40753 0.586102 1.24431C0.653681 1.08109 0.752758 0.932789 0.877673 0.807874C1.00259 0.68296 1.15089 0.583882 1.31411 0.516304C1.47733 0.448725 1.65226 0.413971 1.82891 0.414025L16.1709 0.413824C16.3475 0.413765 16.5225 0.448516 16.6857 0.51609C16.8489 0.583664 16.9972 0.682737 17.1221 0.807648C17.247 0.932559 17.3461 1.08086 17.4137 1.24408C17.4812 1.40729 17.516 1.58223 17.5159 1.75888L17.5159 6.24034C17.5158 6.59689 17.3741 6.93883 17.122 7.19095C16.8699 7.44308 16.528 7.58474 16.1714 7.5848L1.82818 7.585C1.47185 7.58479 1.13018 7.44314 0.878216 7.19118C0.626255 6.93922 0.48461 6.59755 0.484393 6.24122L0.483822 1.75912Z"
        fill="#0A4833"
      />
      <path
        d="M1.82827 1.30968C1.70942 1.3097 1.59544 1.35693 1.5114 1.44097C1.42736 1.52501 1.38013 1.63899 1.38011 1.75784L1.38005 6.24057C1.38007 6.35942 1.42729 6.4734 1.51133 6.55743C1.59537 6.64147 1.70934 6.68869 1.82819 6.68871L16.1714 6.68851C16.2903 6.68849 16.4042 6.64127 16.4883 6.55723C16.5723 6.47318 16.6195 6.35921 16.6196 6.24036L16.619 1.75826C16.619 1.63941 16.5718 1.52543 16.4877 1.44139C16.4037 1.35735 16.2897 1.31013 16.1709 1.31012L14.8271 1.31014L14.8264 3.47734C14.8273 3.53685 14.8164 3.59595 14.7943 3.65119C14.7721 3.70643 14.7392 3.75671 14.6974 3.7991C14.6557 3.84149 14.6059 3.87513 14.551 3.89807C14.496 3.921 14.4371 3.93277 14.3776 3.93269C14.3181 3.93261 14.2592 3.92067 14.2043 3.89758C14.1495 3.87449 14.0998 3.84071 14.0581 3.79821C14.0165 3.7557 13.9837 3.70533 13.9617 3.65002C13.9397 3.59472 13.929 3.53559 13.9301 3.47608L13.9308 1.31015L12.1369 1.31017L12.1369 2.43086C12.1348 2.54836 12.0867 2.66037 12.0029 2.74275C11.9191 2.82513 11.8063 2.87129 11.6887 2.87129C11.5712 2.87129 11.4584 2.82513 11.3746 2.74276C11.2907 2.66038 11.2426 2.54838 11.2406 2.43087L11.2406 1.31019L9.44803 1.31021L9.44799 3.47678C9.44903 3.53629 9.4382 3.59541 9.41614 3.65068C9.39408 3.70596 9.36124 3.75629 9.31952 3.79874C9.2778 3.84119 9.22805 3.87491 9.17316 3.89792C9.11828 3.92094 9.05936 3.93279 8.99984 3.93279C8.94033 3.93279 8.88141 3.92094 8.82652 3.89793C8.77164 3.87491 8.72188 3.8412 8.68017 3.79875C8.63845 3.7563 8.60561 3.70597 8.58355 3.65069C8.56149 3.59542 8.55067 3.5363 8.5517 3.47679L8.55173 1.31022L6.75915 1.31025L6.75913 2.43093C6.76016 2.49044 6.74934 2.54956 6.72728 2.60483C6.70522 2.66011 6.67238 2.71044 6.63066 2.75289C6.58894 2.79534 6.53919 2.82906 6.4843 2.85207C6.42941 2.87509 6.37049 2.88694 6.31098 2.88694C6.25146 2.88694 6.19254 2.87509 6.13766 2.85208C6.08277 2.82906 6.03302 2.79535 5.9913 2.7529C5.94959 2.71045 5.91674 2.66012 5.89469 2.60485C5.87263 2.54957 5.8618 2.49045 5.86284 2.43095L5.86285 1.31026L4.069 1.31029L4.0696 3.47749C4.06956 3.53638 4.05792 3.59469 4.03534 3.64909C4.01277 3.70348 3.9797 3.7529 3.93802 3.79451C3.89635 3.83613 3.84689 3.86912 3.79246 3.89162C3.73803 3.91412 3.67971 3.92568 3.62082 3.92564C3.56193 3.9256 3.50362 3.91396 3.44922 3.89139C3.39483 3.86881 3.34541 3.83574 3.3038 3.79407C3.26219 3.7524 3.22919 3.70294 3.20669 3.64851C3.18419 3.59409 3.17264 3.53576 3.17268 3.47687L3.17334 1.30966L1.82827 1.30968Z"
        fill="#0A4833"
        fill-opacity="0.5"
      />
    </svg>
  </span>
);

export default SizeGuideButton;
